CODE SEGMENT
    ASSUME CS:CODE
START:
    MOV DX,283H
    MOV AL,10011000B
    OUT DX,AL

    MOV DX,280H
    IN AL,DX
    MOV BL,AL
    MOV CL,AL

FLOW:
    MOV DX,280H
    IN AL,DX
    MOV BH,AL
    CMP BH,BL
    JNZ COMPARE
    MOV AL,CL
LIGHT:
    MOV DX,281H
    OUT DX,AL
    CALL DELAY
    ROR AL,1
    MOV CL,AL
    JMP FLOW
COMPARE:
    MOV BL,AL
    JMP LIGHT
DELAY PROC NEAR
    MOV CX,0FFH
LOP:
    MOV DX,0FFFFH
LOP1:
    DEC DX
    JNZ LOP1
    LOOP LOP
    RET
DELAY ENDP

EXIT:    MOV AH,4CH
    INT 21H
DODE ENDS
    END START